# Comprehensive Test Configuration
# Tests all training pipeline features systematically

model:
  model_type: encoder
  name: comprehensive_diarization_test
  
  global_config:
    dropout: 0.1
    batch_size: 4
    d_ff: 4
    device: cpu
  
  encoder:
    d_model: 64
    num_layers: 3
    num_heads: 4
    attention_type: softmax
    activation: GELU
    num_classes: 1  # Binary diarization

global_config:
  corpus_dir: ./data
  output_dir: ./manifests
  
  # Feature configuration
  feature_type: fbank
  num_mel_bins: 64
  sampling_rate: 8000
  frame_length: 0.025
  frame_shift: 0.01
  dither: 0.0

datasets:
  - name: yesno

training:
  epochs: 5
  batch_size: 4
  random_seed: 42
  
  loss:
    main: bce_with_logits
    auxiliary:
      norm_reg: 0.01
  
  optimizer:
    type: adamw
    lr: 0.001
    weight_decay: 0.01
    betas: [0.9, 0.999]
    
  scheduler:
    type: cosine
    min_lr: 0.00001
    warmup_steps: 10
  
  gradient_clipping: 1.0
  gradient_accumulation_steps: 2
  
  checkpoint:
    save_dir: ./test_checkpoints/comprehensive
    interval: 20
  
  validation:
    interval: 10
    batch_size: 4
  
  early_stopping:
    patience: 3
    metric: val_loss
    min_delta: 0.001
  
  logging:
    interval: 5
    tensorboard: true
    wandb: false
    log_metrics: [loss, accuracy]
  
  performance:
    num_workers: 0
    pin_memory: false
  
  eval_knobs:
    label_type: binary
    max_duration: 10.0
  
  callbacks:
    - gradient_clipping

